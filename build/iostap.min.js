/* iostap - v1.3.1 - MIT */
/* A micro-library for iOS-like tap events in the browser */
/* https://github.com/stephenhutchings/iostap.git */
"use strict";var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.iostap=e()}(this,function(){var X;return X={eventName:"iostap",activeClass:"__active",minActiveMS:50,buffer:20,maxDistance:Math.pow(window.innerHeight*window.innerWidth,.35),allowDefault:function(t){return t.target.nodeName.match(/^(INPUT|TEXTAREA|SELECT)$/)}},{set:function(){var t,e,n,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(t in e=[],o)null!=(n=o[t])&&e.push(X[t]=n);return e},initialize:function(t){var v,m,e,n,h,y,w,g,b,S,o,r,a,i,l,T,E,N,Y;T=N=null,w=!1,h="onpointerdown"in window,y="ontouchstart"in window;var u=_slicedToArray(h?["pointerdown","pointermove","pointerup"]:y?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],3);if(e=u[0],m=u[1],v=u[2],this.set(t),a=function(t){return"tagName"in t?t:t.parentNode},r=function(t){var e,n,o;for(e=t;e.parentNode&&!(null!=(n=e.dataset)?n.touch:void 0);)e=e.parentNode;return(null!=e&&null!=(o=e.dataset)?o.touch:void 0)?e:t},i=function(t){var e;for(e=!1;t.parentNode&&y&&!h&&!(e=/^(auto|scroll)$/.test("function"==typeof getComputedStyle?getComputedStyle(t).overflow:void 0));)t=t.parentNode;return e&&t},E=function(t){var e,n,o,r,a,i;if(t){for(e=N.el,a=[];e.parentNode&&(e.classList.add(X.activeClass),!e.dataset.nobubble);)a.push(e=e.parentNode);return a}for(i=[],n=0,o=(r=document.querySelectorAll("."+X.activeClass)).length;n<o;n++)e=r[n],i.push(e.classList.remove(X.activeClass));return i},o=function(t){var e;if(!(N||t.target===document.activeElement&&t.target.nodeName.match(/^(INPUT|TEXTAREA)$/)))return window.clearTimeout(T),e=a(t.target),e=r(e),N={el:e,offset:e.getBoundingClientRect(),scrollParent:i(e)},S(t),n(m,S,!1),n(v,b,!1)},S=function(t){var e,n,o,r,a,i,l,u,c,f,s;if(N){var d=(null!=(l=t.touches)?l[0]:void 0)||t;o=d.clientX,r=d.clientY;var p=N.offset;return s=p.width,f=p.top,i=p.left,a=p.height,null==(e=N.offset).startX&&(e.startX=o),null==(n=N.offset).startY&&(n.startY=r),null==N.parentScrollY&&(N.parentScrollY=null!=(u=N.scrollParent)?u.scrollTop:void 0),N.parentScrollY!==(null!=(c=N.scrollParent)?c.scrollTop:void 0)?g():(w=o>i-X.buffer&&o<i+s+X.buffer&&r>f-X.buffer&&r<f+a+X.buffer&&Math.abs(o-N.offset.startX)<X.maxDistance&&Math.abs(r-N.offset.startY)<X.maxDistance,E(w))}},b=function(t){var e,n,o,r,a,i,l,u,c,f;if(N){if(Y(m,S,!1),Y(v,b,!1),w){X.allowDefault(t)||(t.preventDefault(),t.stopPropagation()),e=y&&!h?t.changedTouches[0]:t;var s=N;r=s.el,l=s.scrollParent;var d=e;a=d.pageX,i=d.pageY,n=d.clientX,o=d.clientY;var p=N.offset;u=p.startX,c=p.startY,(f=document.createEvent("Event")).initEvent(X.eventName,!0,!0),f.detail={pageX:a,pageY:i,clientX:n,clientY:o,startX:u,startY:c},l?r=document.elementFromPoint(e.pageX,e.pageY)||r:r.dispatchEvent(f),window.clearTimeout(T),T=window.setTimeout(function(){if(E(!1),l)return r.dispatchEvent(f)},X.minActiveMS)}return N=null}},g=function(){if(N)return Y(m,S,!1),Y(v,b,!1),N=null,E(!1)},n=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return window.addEventListener(t,e,n)},Y=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return window.removeEventListener(t,e,n)},null!=(l=window.Backbone)&&l.on("canceltap",g),n(e,o,!1),y&&n("touchcancel",g,!1),h)return n("pointercancel",g,!1)}}});